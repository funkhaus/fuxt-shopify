mutation CheckoutCreate($variantId: ID!, $quantity: Int!) {
    checkoutCreate(
        input: { lineItems: [{ variantId: $variantId, quantity: $quantity }] }
    ) {
        checkoutUserErrors {
            message
            field
        }
        checkout {
            id
            webUrl
            lineItems(first: 50) {
                ...lineItems
            }
        }
    }
}

mutation ReplaceCheckout(
    $checkoutId: ID!
    $lineItems: [CheckoutLineItemInput!]!
) {
    checkoutLineItemsReplace(checkoutId: $checkoutId, lineItems: $lineItems) {
        userErrors {
            message
            field
        }
        checkout {
            id
            webUrl
            lineItems(first: 50) {
                ...lineItems
            }
        }
    }
}

mutation CheckoutLineItemsRemove($checkoutId: ID!, $lineItemIds: [ID!]!) {
    checkoutLineItemsRemove(
        checkoutId: $checkoutId
        lineItemIds: $lineItemIds
    ) {
        userErrors {
            message
            field
        }
        checkout {
            id
            webUrl
            lineItems(first: 50) {
                ...lineItems
            }
        }
    }
}

fragment lineItems on CheckoutLineItemConnection {
    edges {
        node {
            id
            title
            quantity
            variant {
                id
                title
                priceV2 {
                    amount
                }
                image {
                    src
                    altText
                }
                product {
                    title
                    handle
                }
            }
        }
    }
}
